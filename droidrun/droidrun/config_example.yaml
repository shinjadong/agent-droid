# DroidRun 설정 파일
# 이 파일은 자동 생성됩니다. 필요에 따라 값을 편집하세요.

# === 에이전트 설정 ===
agent:
  # 작업당 최대 단계 수
  max_steps: 15
  # 추론 모드로 계획 활성화
  reasoning: false
  # 각 작업 후 대기 시간, UI 상태가 업데이트될 때까지 대기 (초)
  after_sleep_action: 1.0
  # UI 안정화 대기 시간 (초)
  wait_for_stable_ui: 0.3
  # 프롬프트 템플릿 기본 디렉토리
  prompts_dir: config/prompts

  # CodeAct 에이전트 설정
  codeact:
    # 비전 기능 활성화 (스크린샷)
    vision: false
    # 시스템 프롬프트 파일명 (prompts_dir/codeact/에 위치)
    system_prompt: system.jinja2
    # 사용자 프롬프트 파일명 (prompts_dir/codeact/에 위치)
    user_prompt: user.jinja2
    # 안전한 코드 실행 활성화 (임포트와 내장 함수 제한)
    safe_execution: false

  # Manager 에이전트 설정
  manager:
    # 비전 기능 활성화 (스크린샷)
    vision: false
    # 시스템 프롬프트 파일명 (prompts_dir/manager/에 위치)
    system_prompt: system.jinja2

  # Executor 에이전트 설정
  executor:
    # 비전 기능 활성화 (스크린샷)
    vision: false
    # 시스템 프롬프트 파일명 (prompts_dir/executor/에 위치)
    system_prompt: system.jinja2

  # Scripter 에이전트 설정
  scripter:
    # 기기 외부 작업을 위한 스크립터 실행 활성화
    enabled: true
    # 스크립터 에이전트 작업당 최대 단계 수
    max_steps: 10
    # 코드 블록당 실행 타임아웃 (초)
    execution_timeout: 30.0
    # 시스템 프롬프트 파일명 (prompts_dir/scripter/에 위치)
    system_prompt_path: system.jinja2
    # 안전한 코드 실행 활성화 (임포트와 내장 함수 제한)
    safe_execution: false

  # 앱 카드 설정
  app_cards:
    # 앱별 지시 카드 활성화
    enabled: true
    # 모드: local (파일 기반), server (HTTP API), 또는 composite (로컬 폴백이 있는 서버)
    mode: local
    # 앱 카드 파일을 포함하는 디렉토리 (local/composite 모드용)
    app_cards_dir: config/app_cards
    # 원격 앱 카드용 서버 URL (server/composite 모드용)
    server_url: null
    # 서버 요청 타임아웃 (초)
    server_timeout: 10.0
    # 서버 재시도 횟수
    server_max_retries: 2

# === LLM 프로필 ===
# 각 에이전트 유형에 대한 LLM 설정 정의
llm_profiles:
  # Manager: 작업 진행 상황에 대해 계획하고 추론
  manager:
    provider: GoogleGenAI
    model: models/gemini-2.5-pro
    temperature: 0.2
    # kwargs: # 선택적 kwargs, .env에 없는 경우 kwargs에 api_key 추가
    #   max_tokens: 8192

  # Executor: 원자적 작업을 선택하고 실행
  executor:
    provider: GoogleGenAI
    model: models/gemini-2.5-flash
    temperature: 0.1
    # kwargs:
    #   max_tokens: 4096

  # CodeAct: 코드 작업을 생성하고 실행
  codeact:
    provider: GoogleGenAI
    model: models/gemini-2.5-pro
    temperature: 0.2
    # kwargs:
    #   max_tokens: 8192

  # Text Manipulator: 입력 필드의 텍스트 편집
  text_manipulator:
    provider: GoogleGenAI
    model: models/gemini-2.5-flash
    temperature: 0.3
    # kwargs:
    #   max_tokens: 4096

  # App Opener: 이름/설명으로 앱 열기
  app_opener:
    provider: GoogleGenAI
    model: models/gemini-2.5-flash
    temperature: 0.0
    # kwargs:
    #   max_tokens: 512

  # Scripter: 기기 외부 작업을 위한 Python 스크립트 실행
  scripter:
    provider: GoogleGenAI
    model: models/gemini-2.5-flash
    temperature: 0.1
    # kwargs:
    #   max_tokens: 4096

  # Structured Output: 최종 답변에서 구조화된 데이터 추출
  structured_output:
    provider: GoogleGenAI
    model: models/gemini-2.5-flash
    temperature: 0.0
    # kwargs:
    #   max_tokens: 2048

# === 기기 설정 ===
device:
  # 기본 기기 시리얼 (null = 자동 감지)
  serial: null
  # USB 대신 TCP 통신 사용
  use_tcp: false
  # 플랫폼: android 또는 ios (현재는 android만 지원됨)
  platform: android

# === 원격 측정 설정 ===
telemetry:
  # 익명 원격 측정 활성화
  enabled: true

# === 추적 설정 ===
tracing:
  # 추적 활성화
  enabled: false
  # 추적 제공자: phoenix 또는 langfuse
  provider: phoenix
  # Langfuse 설정 (빈 문자열이 아닌 경우 환경 변수로 설정)
  langfuse_secret_key: ""  # LANGFUSE_SECRET_KEY
  langfuse_public_key: ""  # LANGFUSE_PUBLIC_KEY
  langfuse_host: ""        # LANGFUSE_HOST
  langfuse_user_id: "anonymous"  # 추적용 사용자 ID
  langfuse_session_id: ""  # 세션 ID (비어 있음 = 프로세스당 UUID 자동 생성)

# === 로깅 설정 ===
logging:
  # 디버그 로깅 활성화
  debug: false
  # 궤적 저장 수준 (none, step, action)
  save_trajectory: none
  # 궤적 파일 경로 (절대 경로 또는 cwd 상대 경로)
  trajectory_path: trajectories

  rich_text: false

# === 안전한 실행 설정 ===
# agent.codeact.safe_execution 또는 agent.scripter.safe_execution이 true일 때 적용됨
safe_execution:
  # 모든 임포트 허용 (allowed_modules 무시, blocked_modules는 준수)
  allow_all_imports: true

  # 허용된 모듈 (비어 있음 + allow_all_imports=false = 임포트 허용 안 함)
  # 예시: ['json', 'requests', 're', 'datetime', 'math', 'collections']
  allowed_modules: []

  # 차단된 모듈 (allowed_modules와 allow_all_imports보다 우선)
  # 위험한 파일 작업, 서브프로세스 실행, 코드 조작 방지
  blocked_modules:
    - os
    - sys
    - subprocess
    - shutil
    - pathlib
    - pty
    - fcntl
    - resource
    - pickle
    - shelve
    - marshal
    - imp
    - importlib
    - ctypes
    - code
    - codeop
    - tempfile
    - glob
    - socket
    - socketserver
    - asyncio

  # 모든 내장 함수 허용 (allowed_builtins 무시, blocked_builtins는 준수)
  allow_all_builtins: true

  # 허용된 내장 함수 (비어 있음 + allow_all_builtins=false = 안전한 기본값 사용)
  # 안전한 기본값 포함: int, str, list, dict, print, len, range 등
  allowed_builtins: []

  # 차단된 내장 함수 (allowed_builtins와 allow_all_builtins보다 우선)
  blocked_builtins:
    - open
    - compile
    - exec
    - eval
    - __import__
    - breakpoint
    - exit
    - quit
    - input

# === 도구 설정 ===
tools:
  # 드래그 도구 활성화
  allow_drag: false # 현재 아무것도 하지 않음, 향후 사용을 위한 자리표시자

# === 자격 증명 설정 ===
credentials:
  # 안전한 비밀 저장을 위한 자격 증명 관리자 활성화
  enabled: false
  # 자격 증명 파일 경로 (형식은 credentials_example.yaml 참조)
  file_path: config/credentials_example.yaml
